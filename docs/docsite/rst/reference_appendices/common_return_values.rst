.. _common_return_values:

戻り値
-------------

.. contents:: トピック

Ansible モジュールは通常、変数に登録可能なデータ構造や、
`Ansible` プログラムで出力時に直接確認できるデータ構造を返します。各モジュールは任意で、独自の戻り値をドキュメント化できます (ansible-doc や :ref:`主なドキュメントサイト<ansible_documentation>` で確認可能)。

本ガイドでは、全モジュールに共通する戻り値を説明します。

.. note::モジュールの戻り値情報の処理が終わると、Ansible 自体でこのようなキーが設定されるものもあります。


Common
^^^^^^

backup_file
```````````
ファイルを操作するときに `backup=no|yes` を実装するモジュール向け。作成したバックアップファイルへのパス。

changed
```````
タスクに変更を加える必要があるかどうかを示すブール値。

failed
``````
タスクが失敗したかどうかを示すブール値。

invocation
``````````
モジュールがどのように呼び出されたかを示す情報。

msg
```
ユーザーに渡される一般的なメッセージを含む文字列。

rc
``
コマンドラインユーティリティーを実行したり、(raw、shell、command など) 直接コマンドを実行するように設定されているモジュール。このフィールドにはこのようなユーティリティーの「戻りコード」が含まれます。

results
```````
このキーが存在する場合には、タスクに対してループが存在し、アイテムごとに通常のモジュールの「結果」が含まれていることを示します。

skipped
```````
タスクがスキップされたかどうかを示すブール値。

stderr
``````
コマンドラインユーティリティーを実行したり、(raw、shell、command など) 直接コマンドを実行するように設定されているモジュール。このフィールドにはこのようなユーティリティーのエラー出力が含まれます。

stderr_lines
````````````
`stderr` が返された時には、このフィールドも表示されます。このフィールドは元のエラー出力からの文字列の一覧 (1 行にアイテム 1 つ) となっています。

stdout
``````
コマンドラインユーティリティーを実行したり、(raw、shell、command など) 直接コマンドを実行するように設定されているモジュール。このフィールドには、このユーティリティーの通常の出力が含まれます。

stdout_lines
````````````
`stdout` が返されると、Ansible は常に文字列の一覧 (元の出力から 1 行にアイテム 1 つを含める) を渡します。


.. _internal_return_values:

Ansible 内での使用
^^^^^^^^^^^^

以下のキーはモジュールで追加できますが、登録変数からは削除されます。これらのキーは、Ansible 自体が「使用」します。

ansible_facts
`````````````
このキーには、ホストに割り当てられたファクトに追加するディクショナリーが含まれているはずです。このキーは、直接アクセスでき、登録変数を使用する必要はありません。

exception
`````````
このキーには、モジュールの例外で発生したトレースバックの情報が含まれます。これは、詳細レベル高 (-vvv) でのみ表示されます。

warnings
````````
このキーには、ユーザーに表示される文字列の一覧が含まれます。

deprecations
````````````
このキーには、ユーザーに表示されるディクショナリー一覧が含まれます。ディクショナリーのキーは `msg` と `version` で、値は文字列です。`version` キーの値は空白の文字列に指定できます。

.. seealso::

   :ref:`all_modules`
       利用可能なモジュールについて
   `GitHub モジュールディレクトリー <https://github.com/ansible/ansible/tree/devel/lib/ansible/modules>`_
       コアモジュールおよび追加モジュールのソースの参照
   `メーリングリスト <https://groups.google.com/group/ansible-devel>`_
       開発メーリングリスト
   `irc.freenode.net <http://irc.freenode.net>`_
       #ansible IRC chat channel
